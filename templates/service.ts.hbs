import { Prisma, PrismaClient } from '@prisma/client';

const prisma= new PrismaClient();
const model= prisma.{{lowercasedName}};


const {{lowercasedName}} = Prisma.validator<Prisma.{{name}}Args>()({
    select: {
        {{#each fields}}
        {{this.name}}: true,
        {{/each}}
    }
})

export type {{name}}Select = Prisma.{{name}}GetPayload<typeof {{lowercasedName}}>
const select = {{lowercasedName}}.select;

{{#each methods}}
export const {{this.name}}{{@root.name}} = async ({{#each params}} {{this.name}}: {{this.type}}{{#unless @last}},{{/unless}}{{/each}}) => {
    const result = await model.{{#if this.customName}}{{this.customName}}{{else}}{{this.name}}{{/if}}({{#if this.requestParams}}{    
        {{#each this.requestParams}}
        {{#if this.as}} {{this.as}} {{else}} {{this.name}}{{/if}}: 
        {{#if this.values}}
            {{#each this.values}}{
                {{this.name}},
            },
            {{/each}}
        {{else}}
            {{this.name}},
        {{/if}}
        {{/each}} 
            select,
    }{{/if}});

    return result;

};
{{/each}}
